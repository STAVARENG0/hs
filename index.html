<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>HS Nutrition | Supplements Store</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&amp;family=Poppins:wght@300;400;500;600&amp;display=swap" rel="stylesheet"/>
<meta content="no-store" http-equiv="Cache-Control"/>
<style>
:root{
  --black:#0d0d0d;
  --white:#ffffff;
  --muted:#9c9c9c;
  --orange:#ff3c00;
  --card:#1a1a1a;
  --oos:#ff2d2d;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,system-ui,Arial,sans-serif;
  color:var(--white);
  background: var(--black);
  min-height:100dvh;
}
.wrap{max-width:1200px;margin:0 auto;padding:26px}
.card{
  background:var(--card);
  border-radius:20px;
  padding:10px 22px 28px;
  border:1px solid rgba(255,255,255,.1);
  box-shadow:0 18px 42px rgba(0,0,0,.6);
  position:relative;
}
header{text-align:center;margin-bottom:18px}
.brand{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0;
  position:relative;
}
.brand img{
  max-width:100%;
  height:auto;
  border:2px solid var(--orange);
  border-radius:20px;
  animation: glow 3s ease-in-out infinite alternate;
}
@keyframes glow {
  from { box-shadow:0 0 6px rgba(255,60,0,0.3); }
  to   { box-shadow:0 0 14px rgba(255,100,0,0.6); }
}

/* Texto WELCOME animado */
.welcome {
  width: 100%;
  max-width: 550px;
  margin: 10px 0 0 0;
}

.welcome text {
  font-family: "Poppins", cursive;
  font-size: 64px;
  fill: none;
  stroke: var(--orange);
  stroke-width: 2px;
  stroke-dasharray: 800;
  stroke-dashoffset: 800;
  animation: draw 6s ease forwards;
}

@keyframes draw {
  to { stroke-dashoffset: 0; }
}

/* SEARCH BAR */
.brand .search-box {
  position: absolute;
  bottom: 10px;
  right: 20px;
  max-width: 300px;
  display: flex;
  gap: 6px;
}

.search-box input {
  flex: 1;
  padding: 12px 16px;
  border-radius: 20px;
  border: none;
  outline: none;
  background: #fff;
  color: #333;
  font-size: 14px;
}

.search-box input::placeholder { color: #999; }
.search-box button {
  padding: 12px 20px;
  border: none;
  border-radius: 20px;
  background: #000;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
}
.search-box button:hover { filter: brightness(1.2); }

/* CATEGORY BUTTONS */
.category-buttons{
  display:flex;
  justify-content:center;
  gap:12px;
  margin: 12px 0 2px;
  flex-wrap: wrap;
}
.pill-btn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:12px 20px;
  border-radius: 9999px;
  background: var(--orange);
  color: var(--white);
  font-weight: 800;
  border: 2px solid var(--orange);
  text-decoration:none;
  box-shadow: 0 6px 18px rgba(255,60,0,0.35);
  cursor:pointer;
  transition: transform .18s ease, filter .18s ease;
}
.pill-btn:hover{ transform: translateY(-1px); filter: brightness(1.05); }
.pill-btn:active{ transform: translateY(0); }

/* Responsivo */
@media (max-width: 600px) {
  .brand { align-items: center; }
  .brand .search-box { position: static; margin-top: 14px; width: 100%; max-width: 100%; padding: 0 10px; display: flex; justify-content: center; gap: 8px; }
  .search-box input { flex: 1; max-width: 70%; padding: 12px; font-size: 16px; }
  .search-box button { padding: 12px 18px; font-size: 15px; }
}

.divider{height:2px;background:linear-gradient(90deg,transparent,var(--orange),transparent);margin:18px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:22px;align-items:stretch}
.product{background:#111;border:1px solid rgba(255,255,255,.08);border-radius:18px;overflow:hidden;box-shadow:0 10px 28px rgba(0,0,0,.28);display:flex;flex-direction:column; position:relative;}
.product img{width:100%;aspect-ratio:1/1;object-fit:cover;background:#0b0b0b;display:block}
.product-body{padding:14px 16px 10px}
.product h3{margin:0 0 6px;font-weight:700;font-size:16px;color:var(--white);cursor:pointer;text-decoration:underline dotted transparent}
.product h3:hover{text-decoration-color:rgba(255,255,255,.5)}
.meta{color:var(--muted);font-size:13px;line-height:1.4;margin-bottom:8px}
.price{font-weight:700;color:var(--white);margin-bottom:6px}
.cta{padding:12px 14px 14px;border-top:1px dashed rgba(255,255,255,.08)}
.btn{display:block;width:100%;text-align:center;text-decoration:none;font-weight:700;padding:12px 14px;border-radius:28px;background:linear-gradient(90deg,var(--orange), #ff8c42);color:#fff;box-shadow:0 8px 20px rgba(240,116,36,.35);transition:transform .18s ease, filter .18s ease;}
.btn:hover{transform:translateY(-1px);filter:brightness(1.1)}
.btn.disabled{opacity:.55;pointer-events:none;filter:grayscale(1)}

footer{color:var(--muted);text-align:center;font-size:12px;margin-top:20px}

.admin-btn-modal { position: absolute; top: 12px; right: 12px; z-index: 100; }
.admin-btn-modal a { background: var(--orange); color: var(--white); text-decoration: none; padding: 4px 8px; border-radius: 6px; font-weight: 500; font-size: 11px; box-shadow: 0 1px 4px rgba(0,0,0,0.4); transition: filter 0.2s; display: inline-block; }
.admin-btn-modal a:hover { filter: brightness(1.1); }

/* OUT OF STOCK ribbon */
.oos-ribbon{
  position:absolute;
  top:10px; left:-40px;
  transform: rotate(-20deg);
  background: rgba(255,45,45,0.85);
  color:#fff;
  padding:10px 60px;
  font-weight:900;
  letter-spacing:.12em;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
  box-shadow:0 10px 20px rgba(0,0,0,.35);
  border:2px solid rgba(255,255,255,0.12);
  pointer-events:none;
}


</style>
</head>
<body>
<div class="wrap">
<div class="card">
<div class="admin-btn-modal">
<a href="login.html">Admin</a>
</div>
<header>
<div class="brand">
<svg class="welcome" viewBox="0 0 600 140" xmlns="http://www.w3.org/2000/svg">
  <text text-anchor="middle" x="50%" y="50%">WELCOME</text>
  <text text-anchor="middle" x="50%" y="72%" 
        style="font-family: Poppins, sans-serif;
               font-size: 18px;
               fill: var(--orange);
               stroke: none;">
    www.hs-nutrition.ie
  </text>
</svg>
<img alt="HS Nutrition Cover" src="5.png"/>
<div class="search-box">
<input id="search" placeholder="Search for products..." type="text"/>
<button onclick="searchProducts()">Search</button>
</div>
</div>
</header>
<!-- NEW CATEGORY BUTTONS -->
<div class="category-buttons">
<a class="pill-btn" href="supplements.html">Supplements</a>
<a class="pill-btn" href="cosmetics.html">Cosmetics</a>
</div>
<div class="divider"></div>
<section class="grid" id="products"></section>
<div class="divider"></div>
<footer>© <span id="year"></span> HS Nutrition</footer>
</div>
</div>
<script>
const PUBLIC_JSON = './products/products.json';
const grid = document.getElementById('products');
let currentList = [];
let currentGallery = [];
let currentIndex = 0;

function sanitizeList(list){
  if(!Array.isArray(list)) return [];
  return list.map(p => ({
    id: p.id || (crypto.randomUUID ? crypto.randomUUID() : Math.floor(Math.random()*1e9)),
    title: p.title || '',
    brand: p.brand || '',
    price: p.price || '',
    image: p.image || '5.png',
    description: p.description || '',
    gallery: p.gallery || [],
    category: p.category || '',
    createdAt: p.createdAt || 0,
    stock: typeof p.stock === 'number' ? p.stock : parseInt(p.stock || '0', 10)
  }));
}

async function readPublic(){
  try{
    const r = await fetch(PUBLIC_JSON + '?t=' + Date.now(), {cache:'no-store'});
    if(!r.ok) throw new Error('HTTP '+r.status);
    if (!r.ok) throw new Error('Erro ao carregar produtos');
    const data = await r.json();
    return sanitizeList(data);
  }catch(e){
    grid.innerHTML = '<div class="meta" style="text-align:center;padding:20px;color:red;">Erro ao carregar produtos. Verifique o arquivo products.json.</div>';
    return []; }
}

function render(list){
  grid.innerHTML = '';
  if(!list.length){
    grid.innerHTML = '<div class="meta" style="text-align:center;padding:20px;">No products available.</div>';
    return;
  }
  list.forEach(p=>{
    const el = document.createElement('article'); el.className='product';
    if(Number(p.stock) <= 0){
      const badge = document.createElement('div');
      badge.className = 'oos-ribbon';
      badge.textContent = 'OUT OF STOCK';
      el.appendChild(badge);
    }
    const img = document.createElement('img'); img.src = p.image; img.alt = p.title; el.appendChild(img);
    const body = document.createElement('div'); body.className='product-body';
    const brand = p.brand ? `<div class="meta">${p.brand}</div>` : '';
    body.innerHTML = `<h3 >${p.title}</h3>${brand}<div class='meta'>Stock: ${p.stock}</div><div class='price'>€ ${p.price}</div>`;
    el.appendChild(body);
    const cta = document.createElement('div'); cta.className='cta';
    const a = document.createElement('a'); a.className='btn'; a.href='#'; a.textContent= Number(p.stock) > 0 ? "Buy Now" : "Out of Stock";
    if(Number(p.stock) <= 0) a.classList.add('disabled');
    cta.appendChild(a); el.appendChild(cta);
    grid.appendChild(el);
  });
}

function searchProducts(){
  const term = document.getElementById('search').value.toLowerCase();
  const filtered = currentList.filter(p =>
    p.title.toLowerCase().includes(term) ||
    (p.brand && p.brand.toLowerCase().includes(term)) ||
    (p.category && p.category.toLowerCase().includes(term))
  );
  render(filtered);
}

}


}

}

(async function init(){
  currentList = await readPublic();
  // sort by most recent
  currentList.sort((a,b)=> (b.createdAt||0) - (a.createdAt||0));
  render(currentList);
  document.getElementById('year').textContent = new Date().getFullYear();
})();
</script>
<script>
document.addEventListener('DOMContentLoaded',function(){
  const overlay=document.getElementById('productModal');
  function isShown(){ return overlay && overlay.style.display==='flex'; }
  function closeIfOverlay(e){ if(e.target===overlay){ closeModal(); } }
  function escClose(e){ if(e.key==='Escape' && isShown()){ closeModal(); } }
  if(overlay){ overlay.addEventListener('click', closeIfOverlay); }
  document.addEventListener('keydown', escClose);
});
</script>
<!-- MODAL -->
<div id="productModal" class="modal-overlay">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal()">×</button>
    <div class="modal-image">
      <img id="modalImage" src="" alt="Product Image">
    </div>
    <div class="modal-info">
      <h2 id="modalTitle"></h2>
      <p id="modalDescription"></p>
      <div class="modal-price" id="modalPrice"></div>
      <button id="modalBuy" class="modal-buy">Buy Now</button>
    </div>
  </div>
</div>

<style>
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.modal-content {
  background: #111;
  border-radius: 16px;
  padding: 24px;
  width: 90%;
  max-width: 420px;
  box-shadow: 0 0 20px rgba(255, 60, 0, 0.3);
  position: relative;
  color: #fff;
  text-align: center;
  animation: pop 0.3s ease;
}
@keyframes pop {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
.modal-image img {
  width: 100%;
  border-radius: 12px;
  margin-bottom: 16px;
}
.modal-info h2 {
  font-size: 22px;
  margin: 10px 0;
  color: #fff;
}
.modal-info p {
  color: #bbb;
  font-size: 14px;
  margin-bottom: 10px;
}
.modal-price {
  font-size: 20px;
  color: #ff3c00;
  font-weight: 700;
  margin-bottom: 18px;
}
.modal-buy {
  background: linear-gradient(90deg, #ff3c00, #ff8c42);
  border: none;
  color: #fff;
  font-weight: 700;
  padding: 12px 24px;
  border-radius: 30px;
  cursor: pointer;
  transition: transform .18s ease, filter .18s ease;
}
.modal-buy:hover { transform: translateY(-1px); filter: brightness(1.1); }
.modal-close {
  position: absolute;
  top: 10px;
  right: 14px;
  background: transparent;
  border: none;
  color: #fff;
  font-size: 26px;
  cursor: pointer;
}
</style>

<script>
function openModal(product) {
  const overlay = document.getElementById('productModal');
  document.getElementById('modalImage').src = product.image;
  document.getElementById('modalTitle').textContent = product.title;
  document.getElementById('modalDescription').textContent = product.description;
  document.getElementById('modalPrice').textContent = "€ " + product.price;
  overlay.style.display = 'flex';
}
function closeModal() {
  document.getElementById('productModal').style.display = 'none';
}
</script>

<script>
// Adicionar evento de clique em cada produto
function render(list){
  grid.innerHTML = '';
  if(!list.length){
    grid.innerHTML = '<div class="meta" style="text-align:center;padding:20px;">No products available.</div>';
    return;
  }
  list.forEach(p=>{
    const el = document.createElement('article'); el.className='product';
    if(Number(p.stock) <= 0){
      const badge = document.createElement('div');
      badge.className = 'oos-ribbon';
      badge.textContent = 'OUT OF STOCK';
      el.appendChild(badge);
    }
    const img = document.createElement('img');
    img.src = p.image; img.alt = p.title;
    img.onclick = () => openModal(p);
    el.appendChild(img);
    const body = document.createElement('div'); body.className='product-body';
    const brand = p.brand ? `<div class="meta">${p.brand}</div>` : '';
    const title = document.createElement('h3');
    title.innerHTML = p.title;
    title.onclick = () => openModal(p);
    body.appendChild(title);
    body.innerHTML += `${brand}<div class='meta'>Stock: ${p.stock}</div><div class='price'>€ ${p.price}</div>`;
    el.appendChild(body);
    const cta = document.createElement('div'); cta.className='cta';
    const a = document.createElement('a'); a.className='btn'; a.href='#'; a.textContent= Number(p.stock) > 0 ? "Buy Now" : "Out of Stock";
    if(Number(p.stock) <= 0) a.classList.add('disabled');
    cta.appendChild(a); el.appendChild(cta);
    grid.appendChild(el);
  });
}
</script>

</body>

</html>
