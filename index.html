<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HS Nutrition | Supplements Store</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<meta http-equiv="Cache-Control" content="no-store"/>
<style>
:root{
  --black:#0d0d0d;
  --white:#ffffff;
  --muted:#9c9c9c;
  --orange:#ff3c00;
  --card:#1a1a1a;
}
*{box-sizing:border-box}
body{ margin:0; font-family:Poppins,system-ui,Arial,sans-serif; color:var(--white); background: var(--black); min-height:100dvh; }
.wrap{max-width:1200px;margin:0 auto;padding:26px}
.card{background:var(--card);border-radius:20px;padding:10px 22px 28px;border:1px solid rgba(255,255,255,.1);box-shadow:0 18px 42px rgba(0,0,0,.6);position:relative;}
header{text-align:center;margin-bottom:18px}
.brand{display:flex;flex-direction:column;align-items:center;gap:0;position:relative;}
.brand img{max-width:100%;height:auto;border:2px solid var(--orange);border-radius:20px;animation: glow 3s ease-in-out infinite alternate;}
@keyframes glow{from{box-shadow:0 0 6px rgba(255,60,0,0.3);}to{box-shadow:0 0 14px rgba(255,100,0,0.6);}}
.divider{height:2px;background:linear-gradient(90deg,transparent,var(--orange),transparent);margin:18px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:22px;align-items:stretch}
.product{background:#111;border:1px solid rgba(255,255,255,.08);border-radius:18px;overflow:hidden;box-shadow:0 10px 28px rgba(0,0,0,.28);display:flex;flex-direction:column;position:relative;}
.product img{width:100%;aspect-ratio:1/1;object-fit:cover;background:#0b0b0b;display:block;cursor:pointer}
.product-body{padding:14px 16px 10px}
.product h3{margin:0 0 6px;font-weight:700;font-size:16px;color:var(--white);cursor:pointer;text-decoration:underline dotted transparent}
.product h3:hover{text-decoration-color:rgba(255,255,255,.5)}
.meta{color:var(--muted);font-size:13px;line-height:1.4;margin-bottom:8px}
.price{font-weight:700;color:var(--white);margin-bottom:6px}
.cta{padding:12px 14px 14px;border-top:1px dashed rgba(255,255,255,.08)}
.btn{display:block;width:100%;text-align:center;text-decoration:none;font-weight:700;padding:12px 14px;border-radius:28px;background:linear-gradient(90deg,var(--orange), #ff8c42);color:#fff;box-shadow:0 8px 20px rgba(240,116,36,.35);transition:transform .18s ease, filter .18s ease;}
.btn:hover{transform:translateY(-1px);filter:brightness(1.1)}
.btn.disabled{opacity:.55;pointer-events:none;filter:grayscale(1)}
footer{color:var(--muted);text-align:center;font-size:12px;margin-top:20px}

/* MODAL */
#modal{position:fixed;inset:0;display:none;place-items:center;z-index:9999;}
#modal.open{display:grid}
#modal .overlay{position:absolute;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(2px);}
#modal .panel{position:relative;width:min(96vw,460px);max-height:92vh;overflow:hidden;background:#111;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:18px;box-shadow:0 18px 42px rgba(0,0,0,.6);display:flex;flex-direction:column;}
#modal img.hero{width:100%;aspect-ratio:1/1;object-fit:cover;background:#000;}
#modal .details{padding:16px;overflow:auto;}
#modal h2{margin:0 0 8px;font-size:20px}
#modal .meta{color:var(--muted);font-size:13px;margin-bottom:8px}
#modal .price{font-size:18px;margin:8px 0 12px;font-weight:700;color:var(--orange);}
#modal .desc{font-size:14px;line-height:1.5;color:#ddd;white-space:pre-wrap}
#modal .actions{display:flex;gap:8px;margin-top:14px;}
#modal .btn.secondary{background:#222;color:#fff;box-shadow:none;}
#modal .close{position:absolute;top:8px;right:10px;background:#222;color:#fff;border:0;border-radius:10px;padding:6px 10px;font-weight:700;cursor:pointer;font-size:18px;}
</style>
</head>
<body>
<div class="wrap">
 <div class="card">
  <header>
   <div class="brand">
     <img src="5.png" alt="HS Nutrition Cover"/>
     <svg class="welcome" viewBox="0 0 600 140" xmlns="http://www.w3.org/2000/svg" style="max-width:480px;margin-top:10px;">
       <text text-anchor="middle" x="50%" y="50%" style="font-family:'Poppins';font-size:54px;fill:none;stroke:var(--orange);stroke-width:2;">WELCOME</text>
     </svg>
   </div>
  </header>

  <div class="divider"></div>
  <section class="grid" id="products"></section>
  <div class="divider"></div>
  <footer>© <span id="year"></span> HS Nutrition</footer>
 </div>
</div>


</html>

<!-- MODAL (estrutura NextRide adaptada para HS Nutrition) -->
<div id="modal" aria-hidden="true" role="dialog">
  <div class="overlay" data-close></div>
  <div class="panel" role="document">
    <button class="close" data-close>&times; Close</button>
    <div class="gallery">
      <div class="hero-wrap">
        <img id="hero" class="hero" alt="Product Image" src=""/>
        <button class="nav prev" id="gPrev" aria-label="Anterior">‹</button>
        <button class="nav next" id="gNext" aria-label="Próxima">›</button>
        <div class="counter" id="mCount">0/0</div>
      </div>
      <div id="thumbs"></div>
    </div>
    <div class="details">
      <h2 id="mTitle">—</h2>
      <div id="mBrand" class="meta">—</div>
      <div id="mPrice" class="price">—</div>
      <div id="mDesc" class="desc">—</div>
      <div class="actions">
        <a id="mBuy" class="btn" target="_blank" rel="noopener">Buy Now</a>
        <a id="mOut" class="btn secondary" target="_blank" rel="noopener" style="display:none;">Out of Stock</a>
      </div>
    </div>
  </div>
</div>

<style>
/* --- Modal estilo NextRide adaptado à paleta HS Nutrition --- */
#modal{position:fixed;inset:0;display:none;place-items:center;z-index:9999;}
#modal.open{display:grid}
#modal .overlay{position:absolute;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(4px);}
#modal .panel{position:relative;width:min(96vw,980px);max-height:92vh;overflow:hidden;background:#111;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:18px;box-shadow:0 18px 42px rgba(0,0,0,.6);display:grid;grid-template-columns:1.2fr 1fr;}
@media (max-width:860px){#modal .panel{grid-template-columns:1fr;}}
#modal .gallery{background:#111;padding:10px;display:flex;flex-direction:column;}
#modal .hero-wrap{position:relative;}
#modal .hero{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:12px;background:#000;}
#thumbs{display:flex;gap:8px;overflow:auto;padding:10px 0;}
#thumbs img{width:80px;height:60px;object-fit:cover;border-radius:8px;opacity:.8;cursor:pointer;border:1px solid rgba(255,255,255,.12);}
#thumbs img.active{opacity:1;outline:2px solid #ff3c00;}
#modal .details{padding:16px;overflow:auto;}
#modal h2{margin:0 0 8px;font-size:20px;}
#modal .meta{margin:8px 0;font-size:13px;color:#bbb;}
#modal .price{font-size:18px;margin:8px 0 12px;font-weight:700;color:#ff3c00;}
#modal .desc{font-size:14px;line-height:1.5;color:#ddd;white-space:pre-wrap;}
#modal .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;}
#modal .btn{background:linear-gradient(90deg,#ff3c00,#ff8c42);border:none;color:#fff;font-weight:700;padding:12px 20px;border-radius:30px;cursor:pointer;text-decoration:none;display:inline-block;}
#modal .btn.secondary{background:#222;}
#modal .close{position:absolute;top:10px;right:10px;background:#222;color:#fff;border:0;border-radius:10px;padding:8px 10px;font-weight:700;cursor:pointer;}
#modal .nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.45);border:0;color:#fff;font-size:26px;width:40px;height:40px;border-radius:50%;cursor:pointer;display:grid;place-items:center;}
#modal .nav.prev{left:10px;}
#modal .nav.next{right:10px;}
#modal .counter{position:absolute;top:10px;left:10px;background:rgba(0,0,0,.45);padding:4px 8px;border-radius:10px;font-size:12px;color:#fff;}
</style>

<script>
const PUBLIC_JSON = './products/products.json';
const grid = document.getElementById('products');
const modal = document.getElementById('modal');
const hero = document.getElementById('hero');
const thumbs = document.getElementById('thumbs');
const mTitle = document.getElementById('mTitle');
const mBrand = document.getElementById('mBrand');
const mPrice = document.getElementById('mPrice');
const mDesc = document.getElementById('mDesc');
const mBuy = document.getElementById('mBuy');
const mOut = document.getElementById('mOut');
const gPrev = document.getElementById('gPrev');
const gNext = document.getElementById('gNext');
const mCount = document.getElementById('mCount');

function sanitizeList(list){
  if(!Array.isArray(list)) return [];
  return list.map(p => ({
    id: p.id || crypto.randomUUID(),
    title: p.title || '',
    brand: p.brand || '',
    price: p.price || '',
    image: p.image || '5.png',
    description: p.description || '',
    gallery: Array.isArray(p.gallery)?p.gallery.filter(Boolean):(p.gallery?[p.gallery]:[]),
    stock: typeof p.stock==='number'?p.stock:parseInt(p.stock||'0',10)
  }));
}

async function readPublic(){
  try{
    const r = await fetch(PUBLIC_JSON+'?t='+Date.now(),{cache:'no-store'});
    if(!r.ok) throw new Error('HTTP '+r.status);
    const data = await r.json();
    return sanitizeList(data);
  }catch(e){console.error(e);return [];}
}

let galleryImgs=[],galleryIndex=0;
function setActiveThumb(i){thumbs.querySelectorAll('img').forEach((t,idx)=>{if(idx===i)t.classList.add('active');else t.classList.remove('active');});}
function showImage(i){if(!galleryImgs.length)return;galleryIndex=(i+galleryImgs.length)%galleryImgs.length;hero.src=galleryImgs[galleryIndex];setActiveThumb(galleryIndex);mCount.textContent=`${galleryIndex+1}/${galleryImgs.length}`;}

function openModal(p){
  galleryImgs=[p.image,...(p.gallery||[])].filter(Boolean);
  if(!galleryImgs.length)galleryImgs=['5.png'];
  hero.src=galleryImgs[0];galleryIndex=0;mCount.textContent=`1/${galleryImgs.length}`;
  thumbs.innerHTML=galleryImgs.map((src,i)=>`<img ${i===0?'class="active"':''} data-idx="${i}" src="${src}" alt="thumb ${i+1}">`).join('');
  thumbs.querySelectorAll('img').forEach(img=>{img.addEventListener('click',()=>showImage(Number(img.dataset.idx)));});
  mTitle.textContent=p.title;mBrand.textContent=p.brand;mPrice.textContent='€ '+p.price;mDesc.textContent=p.description;
  if(Number(p.stock)>0){mBuy.style.display='inline-block';mOut.style.display='none';}else{mBuy.style.display='none';mOut.style.display='inline-block';}
  modal.classList.add('open');modal.setAttribute('aria-hidden','false');document.body.style.overflow='hidden';
}

function closeModal(){modal.classList.remove('open');modal.setAttribute('aria-hidden','true');document.body.style.overflow='';thumbs.innerHTML='';}
modal.addEventListener('click',ev=>{if(ev.target.hasAttribute('data-close'))closeModal();});
window.addEventListener('keydown',ev=>{if(ev.key==='Escape'&&modal.classList.contains('open'))closeModal();if(!modal.classList.contains('open'))return;if(ev.key==='ArrowRight')showImage(galleryIndex+1);if(ev.key==='ArrowLeft')showImage(galleryIndex-1);});
if(gPrev)gPrev.addEventListener('click',()=>showImage(galleryIndex-1));
if(gNext)gNext.addEventListener('click',()=>showImage(galleryIndex+1));

function render(list){
  grid.innerHTML='';
  if(!list.length){grid.innerHTML='<div class="meta" style="text-align:center;padding:20px;">No products available.</div>';return;}
  list.forEach((p,idx)=>{
    const el=document.createElement('article');el.className='product';
    const img=document.createElement('img');img.src=p.image;img.alt=p.title;img.addEventListener('click',()=>openModal(p));el.appendChild(img);
    const body=document.createElement('div');body.className='product-body';
    const h3=document.createElement('h3');h3.textContent=p.title;h3.addEventListener('click',()=>openModal(p));body.appendChild(h3);
    if(p.brand){const brand=document.createElement('div');brand.className='meta';brand.textContent=p.brand;body.appendChild(brand);}
    const stock=document.createElement('div');stock.className='meta';stock.textContent='Stock: '+p.stock;body.appendChild(stock);
    const price=document.createElement('div');price.className='price';price.textContent='€ '+p.price;body.appendChild(price);
    el.appendChild(body);
    const cta=document.createElement('div');cta.className='cta';
    const a=document.createElement('a');a.className='btn';a.href='#';a.textContent=Number(p.stock)>0?'Buy Now':'Out of Stock';if(Number(p.stock)<=0)a.classList.add('disabled');
    cta.appendChild(a);el.appendChild(cta);grid.appendChild(el);
  });
}

let currentList=[];(async function init(){currentList=await readPublic();render(currentList);document.getElementById('year').textContent=new Date().getFullYear();})();
</script>
</body>
</html>
